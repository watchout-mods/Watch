<Ui xmlns="http://www.blizzard.com/wow/ui/"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.blizzard.com/wow/ui/
..\FrameXML\UI.xsd">
	<Frame name="WatchFrameDropDownMenu" inherits="UIDropDownMenuTemplate"/>

	<Button name="WatchFrameTemplate" virtual="true" enableMouse="true"
			resizable="true" movable="true" clampedToScreen="true">
		<Anchors>
			<Anchor point="CENTER" />
		</Anchors>
		<Size>
			<AbsDimension x="200" y="200" />
		</Size>
		<Layers>
			<Layer level="BORDER">
				<Texture>
					<Anchors>
						<Anchor point="TOPLEFT">
							<Offset x="4" y="-4" />
						</Anchor>
						<Anchor point="BOTTOMRIGHT" relativePoint="TOPRIGHT">
							<Offset x="-4" y="-20" />
						</Anchor>
					</Anchors>
					<Color a=".5" r=".5" g="0" b="0"/>
				</Texture>
			</Layer>
			<Layer level="BORDER">
				<Texture>
					<Anchors>
						<Anchor point="TOPLEFT" relativePoint="BOTTOMLEFT">
							<Offset x="4" y="15" />
						</Anchor>
						<Anchor point="BOTTOMRIGHT">
							<Offset x="-4" y="4" />
						</Anchor>
					</Anchors>
					<Color a=".5" r=".5" g="0" b="0"/>
				</Texture>
			</Layer>
			<Layer level="ARTWORK">
				<FontString inherits="GameFontNormal">
					<Anchors>
						<Anchor point="TOPLEFT">
							<Offset x="40" y="0" />
						</Anchor>
						<Anchor point="BOTTOMRIGHT" relativePoint="TOPRIGHT">
							<Offset x="-15" y="-20" />
						</Anchor>
					</Anchors>
				</FontString>
				<FontString inherits="GameFontNormal">
					<Anchors>
						<Anchor point="TOPLEFT">
							<Offset x="0" y="0" />
						</Anchor>
						<Anchor point="BOTTOMRIGHT" relativePoint="TOPLEFT">
							<Offset x="40" y="-20" />
						</Anchor>
					</Anchors>
				</FontString>
			</Layer>
		</Layers>
		<Frames>
			<ScrollFrame setAllPoints="true">
				<Anchors>
					<Anchor point="TOPLEFT">
						<Offset x="5" y="-20" />
					</Anchor>
					<Anchor point="BOTTOMRIGHT">
						<Offset x="-5" y="15" />
					</Anchor>
				</Anchors>
				<ScrollChild>
					<SimpleHTML enableMouse="true">
						<Size>
							<AbsDimension y="200" x="200" />
						</Size>
						<Anchors>
							<Anchor point="TOPLEFT" />
							<Anchor point="TOPRIGHT" />
						</Anchors>
						<FontString inherits="GameFontNormal" />
						<Scripts>
							<OnLoad>
								self:GetParent():GetParent().SimpleHTML = self;
								self:SetWidth(self:GetParent():GetWidth());
								self:SetText("");
							</OnLoad>
							<OnSizeChanged>
								if self:GetRegions() then
									self:SetText(self:GetRegions():GetText());
								end
							</OnSizeChanged>
						</Scripts>
					</SimpleHTML>
				</ScrollChild>
				<Scripts>
					<OnLoad>
						self:GetParent().Scrollframe = self;
					</OnLoad>
					<OnMouseWheel>
						if self:GetScrollChild() then
							local pos = self:GetVerticalScroll();
							local sch = self:GetScrollChild():GetRegions():GetHeight();
							local sfh = self:GetHeight();
							pos = pos - 50*delta;
							
							if pos > sch-sfh then
								pos = sch-sfh;
							end
							if 0 > pos then
								pos = 0;
							end
							
							self:SetVerticalScroll(pos);
						end
					</OnMouseWheel>
					<OnSizeChanged>
						-- OnSizeChanged(self, w, h)
						if self:GetScrollChild() then
							self:GetScrollChild():SetWidth(w);
						end
					</OnSizeChanged>
				</Scripts>
			</ScrollFrame>
			<Frame enableMouse="true">
				<Anchors>
					<Anchor point="BOTTOMRIGHT">
						<Offset x="0" y="0" />
					</Anchor>
				</Anchors>
				<Size>
					<AbsDimension x="15" y="15" />
				</Size>
				<Layers>
					<Layer level="BACKGROUND">
						<Texture setAllPoints="true" alphaMode="ADD" file="Interface\AddOns\Watch\Grabber">
							<Color a="1" r="0" g="0.9" b=".1"/>
						</Texture>
					</Layer>
				</Layers>
				<Scripts>
					<OnMouseDown>
						self:GetParent():StartSizing("BOTTOMRIGHT");
					</OnMouseDown>
					<OnMouseUp>
						self:GetParent():StopMovingOrSizing();
					</OnMouseUp>
				</Scripts>
			</Frame>
			<Button enableMouse="true">
				<Anchors>
					<Anchor point="TOPRIGHT">
						<Offset x="1" y="1" />
					</Anchor>
				</Anchors>
				<Size>
					<AbsDimension x="28" y="28" />
				</Size>
				<Scripts>
					<OnClick>
						self:GetParent():Unwatch();
					</OnClick>
				</Scripts>
				<NormalTexture file="Interface\BUTTONS\CancelButton-Up"/>
				<PushedTexture file="Interface\BUTTONS\CancelButton-Down"/>
				<HighlightTexture file="Interface\BUTTONS\CancelButton-Highlight" alphaMode="ADD"/>
			</Button>
		</Frames>
		<Backdrop bgFile="Interface\Tooltips\UI-Tooltip-Background" edgeFile="Interface\Tooltips\UI-Tooltip-Border" tile="true">
			<EdgeSize>
				<AbsValue val="16"/>
			</EdgeSize>
			<TileSize>
				<AbsValue val="16"/>
			</TileSize>
			<BackgroundInsets>
				<AbsInset left="5" right="5" top="5" bottom="5"/>
			</BackgroundInsets>
		</Backdrop>
		<Scripts>
			<OnLoad>
				local c = TOOLTIP_DEFAULT_COLOR;
				self:SetBackdropBorderColor(c.r, c.g, c.b);
				c = TOOLTIP_DEFAULT_BACKGROUND_COLOR;
				self:SetBackdropColor(c.r, c.g, c.b);
			</OnLoad>
		</Scripts>
	</Button>

</Ui>

